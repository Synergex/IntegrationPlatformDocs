/*! HelpSmith Web Help System 4.1
* https://www.helpsmith.com
* Copyright (c) 2007-2025 Divcom Software */
"use strict";!function(t){function e(e,n){var r=this;r.$container=e,r.activeNode=null,r.allowFx=!0,r.options=t.extend({expandSpeed:100,expandOnDblClick:!0,autoExpand:0,autoCollapse:!1,noButtons:!1,noIcons:!1,data:null,onQueryExpand:null,onActivate:null,onDeactivate:null,onCanActivate:null,onCanReActivate:null,onClick:null,onExpand:null,onCreateNode:null},n),r.$container.addClass("hstree-container"),r.$root=r.$container.find("> ul"),0==r.$root.length&&(r.$root=t("<ul></ul>"),r.$container.append(r.$root)),r.$root.addClass("hstree-root"),r.options.data&&(r.$root.empty(),!function e(n,o){t.each(n,function(){var n=t("<li></li>");"function"==typeof r.options.onCreateNode&&r.options.onCreateNode(n,this);var i=t("<a></a>").text(this.title).appendTo(n);if(i.attr("href",this.href?this.href:"#"),this.target&&i.attr("target",this.target),o.append(n),this.children){var a=t("<ul></ul>").appendTo(n);e(this.children,a)}return!0})}(r.options.data,r.$root),r.options.data=null),r.$container.find("li").each(function(){var e=t(this);e.addClass("hstree-node");var n=e.find("> ul").detach();n.length&&e.addClass("hstree-has-children");var i="",a=e.find("> a");a.length?(i=a.text(),a.empty()):(i=e.text(),a=t('<a href="#"></a>'),e.append(a)),i&&a.attr("title",o(i)),e.data("title",o(i));var s=null;r.options.noButtons||(s=t('<div class="hstree-node-btn"></div>')).append("<i></i>");var l=null;r.options.noIcons||(l=t('<div class="hstree-node-icon"></div>')).append("<i></i>");var d,h,u=t('<div class="hstree-node-title"></div>');i&&u.append(i),s&&a.append(s),l&&a.append(l),a.append(u),e.append(n),e.data("link",a),(h=(d=e).data("link"))&&h.on("click",function(t){t.preventDefault(),t.stopPropagation(),("function"!=typeof r.options.onClick||!0!==r.options.onClick(t,d))&&(2===t.detail?r.options.expandOnDblClick&&(r.autoExpanded||r.toggleNode(d),r.autoExpanded=null):r.options.autoExpand>0&&(1==r.options.autoExpand&&"#"==h.attr("href")||2==r.options.autoExpand)&&(r.autoExpanded=r.expandNode(d)),r.setActiveNode(d))}).on("keydown",function(t){var e=d;switch(t.which){case 32:t.preventDefault(),r.setActiveNode(e);break;case 38:t.preventDefault(),(e=r.getPrevNode(e,!0))&&r.setNodeFocused(e);break;case 40:t.preventDefault(),(e=r.getNextNode(e,!0))&&r.setNodeFocused(e);break;case 37:if(t.preventDefault(),e.find("> ul:visible").length)r.expandNode(e,!1);else{var n=r.getParent(e);n&&r.setNodeFocused(n)}break;case 39:t.preventDefault();var o=r.getFirstChild(e,!0);o?r.setNodeFocused(o):r.expandNode(e)}}),l&&l.on("click",function(t){!s&&n.length&&(t.preventDefault(),t.stopPropagation(),r.toggleNode(e))}),n.length&&(e.addClass("hstree-collapsed"),s&&s.find("> i").on("click",function(t){t.preventDefault(),t.stopPropagation(),r.toggleNode(e),a.focus()}).on("dblclick",function(t){t.preventDefault(),t.stopPropagation(),a.focus()}))})}function n(t,e,n,o){if((!e||t.isNodeValid(e))&&(e?i=1==(r=e.find("> ul")).length&&r.is(":visible"):(r=t.$root,i=!0),1==r.length&&(void 0===o||!o||i))){var r,i,a=r.find("> .hstree-node:"+n+"-child");if(1==a.length)return a}return null}function o(t){return t=(t=t.replace(/&lt;/gi,"<")).replace(/&gt;/gi,">")}function r(t,e,n){return"function"!=typeof t.options.onCanActivate||t.options.onCanActivate(e,n)}function i(t,e){"function"==typeof t.options.onActivate&&t.options.onActivate(e)}e.prototype.getNodeTarget=function(t){if(t){var e=t.data("link");if(e)return{href:e.attr("href"),target:e.attr("target")}}return null},e.prototype.setNodeFocused=function(t,e){if(t){var n=t.data("link");if(n)return void 0===e||e?n.focus():n.blur(),!0}return!1},e.prototype.getFirstChild=function(t,e){return n(this,t,"first",e)},e.prototype.getLastChild=function(t,e){return n(this,t,"last",e)},e.prototype.getNextSibling=function(t){if(this.isNodeValid(t)){var e=t.next();if(1==e.length)return e}return null},e.prototype.getPrevSibling=function(t){if(this.isNodeValid(t)){var e=t.prev();if(1==e.length)return e}return null},e.prototype.getParent=function(t){if(this.isNodeValid(t)){var e=t.parent("ul:not(.hstree-root)").parent(".hstree-node");if(e.length)return e}return null},e.prototype.getNextNode=function(t,e){var n=this.getFirstChild(t,e);if(n)return n;if(!t)return null;for(;;){if(n=this.getNextSibling(t))return n;if(!(n=this.getParent(t)))return null;t=n}},e.prototype.getPrevNode=function(t,e){var n,o=this.getPrevSibling(t);if(o){return this.getLastChild(o,e)||o}var r=this.getParent(t);return r&&!r.is(this.$root)?r:null},e.prototype.isNodeValid=function(t){return t&&1==t.length&&t.hasClass("hstree-node")},e.prototype.expandNode=function(t,e){if(!this.isNodeValid(t))return!1;var n=t.find("> ul");if(!n.length)return!1;if(void 0===e)var e=!0;if("function"==typeof this.options.onQueryExpand&&!1===this.options.onQueryExpand(t,e))return!1;var o=this.allowFx&&this.options.expandSpeed>0,r=n.is(":visible");if(e){if(!r)return t.removeClass("hstree-collapsed").addClass("hstree-expanded"),o?n.slideDown(this.options.expandSpeed):n.show(),this.collapseOther(t),!0}else if(r)return t.removeClass("hstree-expanded").addClass("hstree-collapsed"),o?n.slideUp(this.options.expandSpeed):n.hide(),!0;return!1},e.prototype.toggleNode=function(t){var e=t.find("> ul");return!!e.length&&this.expandNode(t,!e.is(":visible"))},e.prototype.getActiveNode=function(){return this.activeNode},e.prototype.setActiveNode=function(t,e){var n=this;function o(t,e){for(var o=n.getParent(t);o;)e?o.addClass("hstree-active-parent"):o.removeClass("hstree-active-parent"),o=n.getParent(o)}if(void 0===e&&(e=!1),!r(n,t,e))return!1;if(!t||n.isNodeValid(t)){if(!n.activeNode&&!t||n.activeNode&&t&&n.activeNode.is(t)&&(a=t,!("function"==typeof n.options.onCanReActivate&&n.options.onCanReActivate(a))))return!0;if(n.activeNode){var a,s,l,d=n.activeNode;n.activeNode.removeClass("hstree-active"),n.activeNode=null,s=n,l=d,"function"==typeof s.options.onDeactivate&&s.options.onDeactivate(l),o(d,!1)}return!t||!!n.isNodeValid(t)&&(n.activeNode=t,t.addClass("hstree-active"),o(t,!0),e||i(n,t),!0)}},e.prototype.reActivateNode=function(){return!!(this.activeNode&&r(this,this.activeNode,!1))&&(i(this,this.activeNode),!0)},e.prototype.collapseOther=function(e){if(this.options.autoCollapse&&this.isNodeValid(e)){var n=this;e.siblings().each(function(){n.expandNode(t(this),!1)})}},e.prototype.getNodeByData=function(e,n){var o=this.$root.find(".hstree-node");if(0==o.length)return null;var r=null;return o.each(function(){var o=t(this);return o.data(e)!=n||(r=o,!1)}),r},e.prototype.checkNodeURL=function(t,e){if(!t)return!1;if("string"==typeof e)try{var n=new URL(e)}catch(o){return console.error(o.message+': "'+e+'"'),!1}else var n=e;var r=this.getNodeTarget(t);if(r&&"#"!=r.href){var i=null;try{i=new URL(r.href,n)}catch(a){console.error(a.message)}if(i&&n.protocol==i.protocol&&n.host==i.host&&n.port==i.port&&n.pathname.toLowerCase()==i.pathname.toLowerCase())return!0}return!1},e.prototype.getNodeByURL=function(e){var n=this,o=this.$root.find(".hstree-node");if(0==o.length)return null;try{var r=new URL(e)}catch(i){return console.error(i.message+': "'+e+'"'),null}var a=null;return o.each(function(){var e=t(this);return!n.checkNodeURL(e,r)||(a=e,!1)}),a},e.prototype.expandAll=function(e){if(!(e<0)){var n=this,o=this.$root.find(".hstree-node.hstree-collapsed");if(0!=o.length){var r=n.allowFx;try{n.allowFx=!1,o.each(function(){var o=t(this);return o.parentsUntil(this.$root,".hstree-node").length<=e&&n.expandNode(o),!0})}finally{n.allowFx=r}}}},e.prototype.viewNode=function(e){var n=this;if(n.isNodeValid(e)){var o=n.allowFx;try{n.allowFx=!1,e.parents(".hstree-node").each(function(){n.expandNode(t(this))})}finally{n.allowFx=o}return!0}return!1},e.prototype.getChildren=function(t){var e={children:[],list:null};return void 0!==t&&t?this.isNodeValid(t)&&(e.list=t.find("> ul")):e.list=this.$root,e.list&&e.list.length&&e.list.find("> li.hstree-node").each(function(){e.children.push(this)}),e},e.prototype.sortChildren=function(e,n){var o=this.getChildren(n);if(o.children.length){t(o.children[o.children.length-1]).removeClass("hstree-last");for(var r=[],i=0;i<o.children.length;i++)r.push(t(o.children[i]).detach());r.sort(e),o.list.append(r),o.list.find("> li:last-child").addClass("hstree-last")}},e.prototype.getNodesByLevel=function(){for(var t=[],e=this.getFirstChild();e;){var n=e.parentsUntil(this.$root,".hstree-node").length;n>t.length-1&&t.push([]),t[n].push(e),e=this.getNextNode(e)}return t},e.prototype.getExpandStateBits=function(){for(var t=this.getNodesByLevel().flat(),e=new Uint8Array(Math.ceil(t.length/8)),n=0;n<t.length;n++)if(t[n].hasClass("hstree-expanded")){var o=1<<n%8;e[Math.floor(n/8)]|=o}return e},e.prototype.setExpandStateBits=function(t,e){if(t){void 0===e&&(e=0);var n=this,o=n.allowFx;try{n.allowFx=!1;for(var r=n.getNodesByLevel().flat(),i=0;i<r.length;i++){var a=r[i],s=!1,l=Math.floor(i/8)+e;if(l<t.length){var d=1<<i%8;s=(t[l]&d)!=0}n.expandNode(a,s)}}finally{n.allowFx=o}}};var a={init:function(n){return this.each(function(){var o=t(this);!o.data("hsTree")&&(o.find("> ul").length||n.data)&&o.data("hsTree",new e(o,n))})},getNodeTarget:function(t){var e=this.first().data("hsTree");return e?e.getNodeTarget(t):null},setNodeFocused:function(t,e){var n=this.first().data("hsTree");return!!n&&n.setNodeFocused(t,e)},getActiveNode:function(){var t=this.first().data("hsTree");return t?t.getActiveNode():null},setActiveNode:function(t,e){var n=this.first().data("hsTree");if(n){var o=n.setActiveNode(t,e);return t&&o&&n.viewNode(t),o}return!1},reActivateNode:function(){var t=this.first().data("hsTree");t&&t.reActivateNode()},getNodeByData:function(t,e){var n=this.first().data("hsTree");return n?n.getNodeByData(t,e):null},checkNodeURL:function(t,e){var n=this.first().data("hsTree");return!!n&&n.checkNodeURL(t,e)},getNodeByURL:function(t){var e=this.first().data("hsTree");return e?e.getNodeByURL(t):null},expandAll:function(t){var e=this.first().data("hsTree");if(e)return e.expandAll(t)},expandNode:function(t,e){var n=this.first().data("hsTree");return!!n&&n.expandNode(t,e)},getChildren:function(t){var e=this.first().data("hsTree");return e?e.getChildren(t).children:[]},sortChildren:function(t,e){var n=this.first().data("hsTree");n&&n.sortChildren(t,e)},getExpandStateBits:function(){var t=this.first().data("hsTree");return t?t.getExpandStateBits():null},setExpandStateBits:function(t){var e=this.first().data("hsTree");e&&e.setExpandStateBits(t)},getParent:function(t){var e=this.first().data("hsTree");return e?e.getParent(t):null}};t.fn.hsTree=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.hsTree"):a.init.apply(this,arguments)}}(jQuery);